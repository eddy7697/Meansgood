!function(e){function t(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,i){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=297)}({1:function(e,t){e.exports=function(e,t,a,i,r,o){var n,s=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(n=e,s=e.default);var m="function"==typeof s?s.options:s;t&&(m.render=t.render,m.staticRenderFns=t.staticRenderFns,m._compiled=!0),a&&(m.functional=!0),r&&(m._scopeId=r);var p;if(o?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},m._ssrRegister=p):i&&(p=i),p){var l=m.functional,u=l?m.render:m.beforeCreate;l?(m._injectStyles=p,m.render=function(e,t){return p.call(t),u(e,t)}):m.beforeCreate=u?[].concat(u,p):[p]}return{esModule:n,exports:s,options:m}}},297:function(e,t,a){e.exports=a(298)},298:function(e,t,a){Vue.component("checkout",a(299));new Vue({el:"#checkout"})},299:function(e,t,a){var i=a(1)(a(300),a(301),!1,null,null,null);e.exports=i.exports},300:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),$(".loading-bar").fadeOut("100"),t.default={data:function(){return{token:$('meta[name="csrf-token"]').attr("content"),amount:null,shippingTag:$("#shipping_method").val(),paymentMethod:null,point:null,percentage:0,pointUsage:0,owner:null,isCouponFieldShow:!1,isCouponUse:!1,discountType:"",couponAmount:null,Temperature:null,cart:[],couponNumber:"",shippingMethods:[],customerParametor:{ReceiverName:"",ReceiverCellPhone:"",ReceiverEmail:"",ReceiverCity:"",ReceiverPort:"",ReceiverAddress:"",remarks:"",newMemberPassword:"",receipt:"",taxId:""},formValidation:{ReceiverName:!0,ReceiverCellPhone:!0,ReceiverEmail:!0,ReceiverPort:!0,ReceiverCity:!0,ReceiverAddress:!0},cvsParametor:{MerchantTradeNo:null,LogisticsSubType:"",CVSStoreID:"",CVSStoreName:null,CVSAddress:null,CVSTelephone:null},usedCouponContent:{discountType:"NONE",couponAmount:0},isAuth:!1,isAllow:!1,addNewMember:!1}},created:function(){var e=this,t=this.token,a=new Promise(function(e,a){$.ajax({url:"/checkAuth",type:"POST",cache:!1,beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",t)}}).done(function(t){e(t)}).fail(function(e){a(e)})}),i=new Promise(function(e,t){$.ajax({url:"/shipping/get",type:"GET",cache:!1,dataType:"json"}).done(function(t){e(t.data)}).fail(function(e){t(e)})}),r=new Promise(function(e,t){$.ajax({url:"/cart/get",type:"GET",cache:!1,dataType:"json"}).done(function(t){e(t)}).fail(function(e){t(e)})}),o=new Promise(function(e,t){$.ajax({url:"/cart/checkTemp",type:"GET",cache:!1,dataType:"json"}).done(function(t){e(t)}).fail(function(e){t(e)})});Promise.all([a,i,r,o]).then(function(t){var a=t[0],i=t[1],r=t[2],o=t[3];if(e.isAuth=a.auth,a.auth?e.getPoint():(e.point=0,e.owner="guest"),e.Temperature=o.Temperature,i.forEach(function(t){t.shippingTemperature===o.Temperature&&e.shippingMethods.push(t)}),e.amount=parseInt(r.amount.replace(/,/g,"")),0===r.cart.length&&(window.location.href="/"),r.cart.forEach(function(t){e.cart.push({id:t.id,Name:t.id.title,price:t.price,qty:t.qty,rowId:t.rowId,total:t.total})}),void 0===localStorage.logistic_cache)console.log("no set");else{var n,s=JSON.parse(localStorage.logistic_cache);switch(s.LogisticsSubType){case"FAMIC2C":n="全家店到店 - ";break;case"UNIMARTC2C":n="7-11 店到店 - ";break;case"HILIFEC2C":n="萊爾富店到店 - "}e.cvsParametor.MerchantTradeNo=s.MerchantTradeNo,e.cvsParametor.LogisticsSubType=s.LogisticsSubType,e.cvsParametor.CVSStoreID=s.CVSStoreID,e.cvsParametor.CVSStoreName=n+s.CVSStoreName,e.cvsParametor.CVSAddress=s.CVSAddress,e.cvsParametor.CVSTelephone=s.CVSTelephone}})},computed:{shippingCosts:function(){var e=this,t=0;return this.methodsTranslate.forEach(function(a){e.shippingTag==a.id&&(t=a.freeShipping&&e.amount>=a.freeShippingMininum?0:a.shippingPrice)}),t},shippingMethod:function(){var e=this,t="delivery";return this.shippingMethods.forEach(function(a){e.shippingTag==a.id&&(t=a.shippingType)}),t},methodsTranslate:function(){var e=[];return this.shippingMethods.forEach(function(t){e.push({freeShipping:1==t.freeShipping,freeShippingMininum:t.freeShippingMininum,id:t.id,shippingPrice:t.shippingPrice,shippingTemperature:t.shippingTemperature,shippingTitle:t.shippingTitle,shippingType:t.shippingType})}),e},finalAmount:function(){var e,t=this.isCouponUse,a=this.discountType,i=this.couponAmount;if(t)switch(a){case"percentage":e=this.amount-this.amount/i;break;case"cartDiscount":e=this.amount-i}else e=this.amount;return Math.ceil(e)},amountString:function(){return parseInt(this.finalAmount).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},methods:{getAddress:function(){var e=this;$.ajax({url:"/getAddress/"+e.owner,type:"GET",dataType:"json"}).done(function(t){e.customerParametor.ReceiverName=t.fullName,e.customerParametor.ReceiverCellPhone=t.cellPhone,e.customerParametor.ReceiverCity=t.city,e.customerParametor.ReceiverPort=t.postcode,e.customerParametor.ReceiverAddress=t.address}).fail(function(){}).always(function(){})},getPoint:function(){var e=this;$.ajax({url:"/checkout/getPoint",type:"GET",dataType:"json"}).done(function(t){e.point=t.data.point,e.percentage=t.data.percentage,e.owner=t.data.guid,e.customerParametor.ReceiverEmail=t.data.email,e.getAddress(),$("#point-input").attr("max",t.data.point)}).fail(function(t){401===t.status&&(e.point=0,e.percentage=0,e.owner="guest")}).always(function(){})},createOrder:function(){var e;if("cod"==this.paymentMethod&&"cvs"==this.shippingMethod?e="cvsCod":"cvs"==this.shippingMethod&&"cod"!==this.paymentMethod?e="cvs":"cvs"!==this.shippingMethod&&(e="aoi"),this.customerParametor.taxId.length>0&&8!==this.customerParametor.taxId.length)return this.showMessage("warning","統一編號錯誤");if(this.validateForm(),!Number.isInteger(parseInt(this.customerParametor.ReceiverCellPhone))||this.customerParametor.ReceiverCellPhone.length<10||this.customerParametor.ReceiverCellPhone.length>10)this.showMessage("warning","請確認行動電話格式正確。");else if(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(this.customerParametor.ReceiverEmail))if(this.isAllow)switch(e){case"cvsCod":this.cvsCod();break;case"cvs":case"aoi":this.aoiMethod()}else this.showMessage("warning","請確認運送資訊填寫是否完整。");else this.showMessage("warning","請確認電子郵件格式正確。")},aoiMethod:function(){if("cod"!==this.paymentMethod&&null!==this.paymentMethod){var e=document.createElement("form"),t=document.createElement("input"),a=document.createElement("input"),i=document.createElement("input"),r=document.createElement("textArea"),o=document.createElement("input"),n=document.createElement("input"),s=document.createElement("input"),c=document.createElement("input"),m=document.createElement("textArea"),p=document.createElement("input"),l=document.createElement("input"),u=document.createElement("input"),d=document.createElement("input"),h=document.createElement("input"),v=document.createElement("input"),g=document.createElement("textArea"),f=document.createElement("textArea"),C=parseInt(this.percentage)/100,_=parseInt(this.amount)-parseInt(this.pointUsage);if(e.id="checkout-form",t.setAttribute("type","hidden"),e.method="POST",e.action="/order-payment",t.value=this.token,t.name="_token",e.appendChild(t),v.value=Math.ceil(C*_),v.name="pointCount",e.appendChild(v),d.value=this.customerParametor.taxId,d.name="taxId",e.appendChild(d),h.value=this.customerParametor.receipt,h.name="receipt",e.appendChild(h),a.value=this.paymentMethod,a.name="ChoosePayment",e.appendChild(a),u.value=this.Temperature,u.name="Temperature",e.appendChild(u),o.value=this.pointUsage,o.name="pointUsage",e.appendChild(o),n.value=this.owner,n.name="owner",e.appendChild(n),i.value=this.finalAmount,i.name="TotalAmount",e.appendChild(i),r.value=JSON.stringify(this.cart),r.name="cartInfo",e.appendChild(r),s.value=this.shippingMethod,s.name="shippingMethod",e.appendChild(s),c.value=this.shippingCosts,c.name="shippingCosts",e.appendChild(c),g.value=this.customerParametor.remarks,g.name="Remark",e.appendChild(g),this.usedCouponContent&&(f.value=JSON.stringify(this.usedCouponContent),f.name="usedCoupon",e.appendChild(f)),"cvs"===this.shippingMethod){if(null===this.cvsParametor.MerchantTradeNo)return void alert("請先選擇取貨超商。");m.value=JSON.stringify({MerchantTradeNo:this.cvsParametor.MerchantTradeNo,LogisticsSubType:this.cvsParametor.LogisticsSubType,CVSStoreID:this.cvsParametor.CVSStoreID,CVSStoreName:this.cvsParametor.CVSStoreName,CVSAddress:this.cvsParametor.CVSAddress,CVSTelephone:this.cvsParametor.CVSTelephone,ReceiverName:this.customerParametor.ReceiverName,ReceiverCellPhone:this.customerParametor.ReceiverCellPhone,ReceiverEmail:this.customerParametor.ReceiverEmail}),m.name="shippingTarget",e.appendChild(m)}else m.value=JSON.stringify(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({ReceiverName:this.customerParametor.ReceiverName,ReceiverCellPhone:this.customerParametor.ReceiverCellPhone,ReceiverEmail:this.customerParametor.ReceiverEmail,ReceiverCity:this.customerParametor.ReceiverCity,ReceiverPort:this.customerParametor.ReceiverPort,ReceiverAddress:this.customerParametor.ReceiverAddress},"ReceiverEmail",this.customerParametor.ReceiverEmail)),m.name="shippingTarget",e.appendChild(m);p.value=this.addNewMember,p.name="addNewMember",e.appendChild(p),l.value=this.customerParametor.newMemberPassword,l.name="password",e.appendChild(l),document.body.appendChild(e),localStorage.removeItem("logistic_cache"),e.submit(),$(".loading-bar").fadeIn("100")}else alert("請選擇付款方式")},cvsCod:function(){var e=document.createElement("form"),t=document.createElement("input"),a=document.createElement("input"),i=document.createElement("input"),r=document.createElement("input"),o=document.createElement("input"),n=document.createElement("input"),s=document.createElement("input"),c=document.createElement("input"),m=document.createElement("textArea"),p=document.createElement("input"),l=document.createElement("input"),u=document.createElement("textArea"),d=document.createElement("input"),h=document.createElement("input"),v=document.createElement("input"),g=document.createElement("input"),f=document.createElement("input"),C=document.createElement("input"),_=document.createElement("input"),P=document.createElement("input"),y=document.createElement("input"),b=document.createElement("textArea"),w=document.createElement("textArea"),S=parseInt(this.percentage)/100,M=parseInt(this.amount)-parseInt(this.pointUsage);this.amount>4e3?this.showMessage("warning","超商取貨付款最高代收金額為4000元，請更新您的訂單。"):(e.id="checkout-form",v.setAttribute("type","hidden"),e.method="POST",e.action="/shop_option_reply",v.value=this.token,v.name="_token",e.appendChild(v),y.value=Math.ceil(S*M),y.name="pointCount",e.appendChild(y),_.value=this.customerParametor.taxId,_.name="taxId",e.appendChild(_),P.value=this.customerParametor.receipt,P.name="receipt",e.appendChild(P),t.value=this.cvsParametor.LogisticsSubType,t.name="LogisticsSubType",e.appendChild(t),C.value=this.Temperature,C.name="Temperature",e.appendChild(C),c.value="Y",c.name="IsCollection",e.appendChild(c),n.value=this.cvsParametor.CVSStoreID,n.name="CVSStoreID",e.appendChild(n),a.value=this.customerParametor.ReceiverName,a.name="ReceiverName",e.appendChild(a),i.value=this.customerParametor.ReceiverCellPhone,i.name="ReceiverCellPhone",e.appendChild(i),o.value=this.paymentMethod,o.name="ChoosePayment",e.appendChild(o),p.value=this.pointUsage,p.name="pointUsage",e.appendChild(p),r.value=this.customerParametor.ReceiverEmail,r.name="ReceiverEmail",e.appendChild(r),d.value=this.owner,d.name="owner",e.appendChild(d),s.value=this.finalAmount,s.name="TotalAmount",e.appendChild(s),l.value=this.shippingMethod,l.name="shippingMethod",e.appendChild(l),h.value=this.shippingCosts,h.name="shippingCosts",e.appendChild(h),m.value=JSON.stringify(this.cart),m.name="cartInfo",e.appendChild(m),b.value=this.customerParametor.remarks,b.name="Remark",e.appendChild(b),this.usedCouponContent&&(w.value=JSON.stringify(this.usedCouponContent),w.name="usedCoupon",e.appendChild(w)),null!==this.cvsParametor.MerchantTradeNo?(u.value=JSON.stringify({MerchantTradeNo:this.cvsParametor.MerchantTradeNo,LogisticsSubType:this.cvsParametor.LogisticsSubType,CVSStoreID:this.cvsParametor.CVSStoreID,CVSStoreName:this.cvsParametor.CVSStoreName,CVSAddress:this.cvsParametor.CVSAddress,CVSTelephone:this.cvsParametor.CVSTelephone,ReceiverName:this.customerParametor.ReceiverName,ReceiverCellPhone:this.customerParametor.ReceiverCellPhone,ReceiverEmail:this.customerParametor.ReceiverEmail}),u.name="shippingTarget",e.appendChild(u),g.value=this.addNewMember,g.name="addNewMember",e.appendChild(g),f.value=this.customerParametor.newMemberPassword,f.name="password",e.appendChild(f),document.body.appendChild(e),localStorage.removeItem("logistic_cache"),e.submit(),$(".loading-bar").fadeIn("100")):alert("請先選擇取貨超商。"))},changePointUse:function(e){switch(e){case"up":if(this.pointUsage>=this.point)return void(this.pointUsage=this.point);if(this.pointUsage<0)return void(this.pointUsage=0);this.pointUsage=parseInt(this.pointUsage)+1;break;case"down":if(this.pointUsage<=0)return void(this.pointUsage=0);this.pointUsage>this.point?this.pointUsage=this.point:this.pointUsage=parseInt(this.pointUsage)-1}},pointInputValid:function(){this.pointUsage>this.point?this.pointUsage=this.point:this.pointUsage<0?this.pointUsage=0:""==this.pointUsage&&(this.pointUsage=0)},validateForm:function(){"cvs"===this.shippingMethod?this.formValidation.ReceiverName&&this.formValidation.ReceiverCellPhone&&this.customerParametor.ReceiverEmail?this.isAllow=!0:this.isAllow=!1:this.formValidation.ReceiverName&&this.formValidation.ReceiverCellPhone&&this.customerParametor.ReceiverEmail&&this.customerParametor.ReceiverPort&&this.customerParametor.ReceiverCity&&this.customerParametor.ReceiverAddress?this.isAllow=!0:this.isAllow=!1},chooseCvs:function(e){window.location.href="/getCvsTarget?shop="+e},typeCoupon:function(){this.isCouponFieldShow=!this.isCouponFieldShow},useCoupon:function(){var e=this,t=this.token;""!==this.couponNumber?$.ajax({url:"/coupon/get/"+this.couponNumber,type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",t)}}).done(function(t){var a=1===t.data.isPublish,i=t.data.maximumAmount,r=t.data.minimumAmount,o=t.data.discountType,n=t.data.couponAmount;a?(e.usedCouponContent={discountType:e.isCouponUse,couponAmount:n},(i||""===i)&&e.amount>i?e.showMessage("warning","訂單金額已超出優惠券的限制金額。"):(r||""===r)&&e.amount<r?e.showMessage("warning","訂單金額小於優惠券的最低使用金額。"):(e.isCouponUse=!0,e.discountType=o,e.couponAmount=n,e.showMessage("success","優惠券使用成功"))):e.showMessage("warning","此優惠券尚未發佈。")}).fail(function(t){console.log(t.status),404===t.status&&e.showMessage("error","此優惠券無效。")}).always(function(){}):$("#coupon-field").focus()},showMessage:function(e,t){toastr[e](t)}}}},301:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("form",{on:{submit:function(t){t.preventDefault(),e.createOrder(t)}}},[a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"shipping-form"},[a("h4",[e._v("商品寄送資訊")]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-row"},[a("label",{attrs:{for:"shipping-name"}},[e._v("收件人姓名 *")]),e._v(" "),e.formValidation.ReceiverName?e._e():a("strong",{staticStyle:{color:"#600000"}},[e._v("  此欄位為必填 *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.ReceiverName,expression:"customerParametor.ReceiverName"}],staticClass:"form-control",attrs:{type:"text",id:"shipping-name",placeholder:"",required:""},domProps:{value:e.customerParametor.ReceiverName},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"ReceiverName",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shipping-phone"}},[e._v("收件人行動電話 *")]),e._v(" "),e.formValidation.ReceiverCellPhone?e._e():a("strong",{staticStyle:{color:"#600000"}},[e._v("  此欄位為必填 *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.ReceiverCellPhone,expression:"customerParametor.ReceiverCellPhone"}],staticClass:"form-control",attrs:{type:"text",id:"shipping-phone",placeholder:"",required:""},domProps:{value:e.customerParametor.ReceiverCellPhone},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"ReceiverCellPhone",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shipping-email"}},[e._v("收件人電子郵件 *")]),e._v(" "),e.formValidation.ReceiverEmail?e._e():a("strong",{staticStyle:{color:"#600000"}},[e._v("  此欄位為必填 *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.ReceiverEmail,expression:"customerParametor.ReceiverEmail"}],staticClass:"form-control",attrs:{type:"email",id:"shipping-email",placeholder:"",required:""},domProps:{value:e.customerParametor.ReceiverEmail},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"ReceiverEmail",t.target.value)}}})])])]),e._v(" "),"delivery"==e.shippingMethod?a("div",{staticClass:"row"},[a("hr"),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-row"},[a("label",{attrs:{for:"shipping-city"}},[e._v("縣市 *")]),e._v(" "),e.formValidation.ReceiverCity?e._e():a("strong",{staticStyle:{color:"#600000"}},[e._v("  此欄位為必填 *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.ReceiverCity,expression:"customerParametor.ReceiverCity"}],staticClass:"form-control",attrs:{type:"text",id:"shipping-city",placeholder:"",required:""},domProps:{value:e.customerParametor.ReceiverCity},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"ReceiverCity",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shipping-port"}},[e._v("郵遞區號 *")]),e._v("  \n                            "),a("a",{attrs:{target:"_blank",href:"https://www.post.gov.tw/post/internet/SearchZone/index.jsp?ID=130107"}},[e._v("郵遞區號查詢")]),e._v(" "),e.formValidation.ReceiverPort?e._e():a("strong",{staticStyle:{color:"#600000"}},[e._v("  此欄位為必填 *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.ReceiverPort,expression:"customerParametor.ReceiverPort"}],staticClass:"form-control",attrs:{type:"text",id:"shipping-port",placeholder:"",required:""},domProps:{value:e.customerParametor.ReceiverPort},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"ReceiverPort",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shipping-address"}},[e._v("地址 *")]),e._v(" "),e.formValidation.ReceiverAddress?e._e():a("strong",{staticStyle:{color:"#600000"}},[e._v("  此欄位為必填 *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.ReceiverAddress,expression:"customerParametor.ReceiverAddress"}],staticClass:"form-control",attrs:{type:"text",id:"shipping-address",placeholder:"",required:""},domProps:{value:e.customerParametor.ReceiverAddress},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"ReceiverAddress",t.target.value)}}})])])]):e._e(),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shipping-note"}},[e._v("訂單備註")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.remarks,expression:"customerParametor.remarks"}],staticClass:"form-control",staticStyle:{resize:"vertical","min-height":"100px"},attrs:{name:"name",id:"shipping-note"},domProps:{value:e.customerParametor.remarks},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"remarks",t.target.value)}}})]),e._v(" "),a("hr"),e._v(" "),e.isAuth?e._e():a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addNewMember,expression:"addNewMember"}],attrs:{type:"checkbox",id:"check-add-user",placeholder:""},domProps:{checked:Array.isArray(e.addNewMember)?e._i(e.addNewMember,null)>-1:e.addNewMember},on:{change:function(t){var a=e.addNewMember,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=e._i(a,null);i.checked?o<0&&(e.addNewMember=a.concat([null])):o>-1&&(e.addNewMember=a.slice(0,o).concat(a.slice(o+1)))}else e.addNewMember=r}}}),e._v(" "),a("label",{attrs:{for:"check-add-user"}},[e._v("非會員申請加入會員")])]),e._v(" "),!e.isAuth&&e.addNewMember?a("div",{staticClass:"form-group"},[a("p",[e._v("您輸入的Email即為帳號名稱，請在下方設定密碼，立即完成您的帳號建立。如果您已經建立過帳號，可直接在網頁上方登入。")]),e._v(" "),a("label",{attrs:{for:"new-member-password"}},[e._v("設定密碼 *")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.newMemberPassword,expression:"customerParametor.newMemberPassword"}],staticClass:"form-control",attrs:{type:"password",id:"new-member-password",placeholder:"",required:""},domProps:{value:e.customerParametor.newMemberPassword},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"newMemberPassword",t.target.value)}}})]):e._e()]),e._v(" "),a("br"),e._v(" "),a("h4",[e._v("三聯式發票資訊")]),e._v(" "),a("p",[e._v("您的發票會與訂單一併寄出，若您需要索取三聯式發票，請於下方欄位輸入即可。")]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shipping-receipt"}},[e._v("發票抬頭")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.receipt,expression:"customerParametor.receipt"}],staticClass:"form-control",attrs:{type:"text",id:"shipping-receipt",placeholder:""},domProps:{value:e.customerParametor.receipt},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"receipt",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"shipping-taxid"}},[e._v("統一編號")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customerParametor.taxId,expression:"customerParametor.taxId"}],staticClass:"form-control",attrs:{type:"text",id:"shipping-taxid",placeholder:""},domProps:{value:e.customerParametor.taxId},on:{input:function(t){t.target.composing||e.$set(e.customerParametor,"taxId",t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"col-md-5"},[a("h4",[e._v("訂單資訊")]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"payment-gateway"},[a("table",{staticClass:"table"},[e._m(0),e._v(" "),a("tbody",[e._l(e.cart,function(t){return a("tr",[a("td",[e._v(e._s(t.id.title)+" x "+e._s(t.qty))]),e._v(" "),a("td",{staticStyle:{"text-align":"right","min-width":"50px"}},[e._v("NT$ "+e._s(t.total))])])}),e._v(" "),a("tr",[a("td",[e._v("小計")]),e._v(" "),a("td",{staticStyle:{"text-align":"right","min-width":"50px"}},[e._v("NT$ "+e._s(e.amountString))])]),e._v(" "),a("tr",[a("td",[e._v("運送方式")]),e._v(" "),a("td",[a("ul",{staticClass:"shipping-method-list"},e._l(e.methodsTranslate,function(t){return a("li",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.shippingTag,expression:"shippingTag"}],attrs:{type:"radio",name:"shipping-method",id:t.shippingType+t.shippingTemperature+t.id},domProps:{value:t.id,checked:e._q(e.shippingTag,t.id)},on:{change:function(a){e.shippingTag=t.id}}}),e._v(" "),t.freeShipping&&e.amount>=t.freeShippingMininum?a("label",{attrs:{for:t.shippingType+t.shippingTemperature+t.id}},[e._v(e._s(t.shippingTitle)+" 滿額免運")]):a("label",{attrs:{for:t.shippingType+t.shippingTemperature+t.id}},[e._v(e._s(t.shippingTitle)+" NT$ "+e._s(t.shippingPrice))]),e._v(" "),e.amount<t.freeShippingMininum&&e.shippingTag===t.id?a("div",[e._v("\n                                            購物滿 "+e._s(t.freeShippingMininum)+" 元即可享有免運費的優惠唷！\n                                        ")]):e._e()])}))])]),e._v(" "),"guest"!==e.owner?a("tr",[a("td",[e._v("購物金使用：剩餘 "+e._s(e.point)+"元")]),e._v(" "),a("td",{attrs:{align:"right"}},[a("div",{staticClass:"form-group",staticStyle:{width:"125px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.changePointUse("down")}}},[a("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pointUsage,expression:"pointUsage"}],staticClass:"form-control",class:{"has-error":e.pointUsage>e.point},staticStyle:{"text-align":"center",padding:"0px 10px"},attrs:{type:"number",id:"point-input",blur:e.pointInputValid(),min:"0"},domProps:{value:e.pointUsage},on:{input:function(t){t.target.composing||(e.pointUsage=t.target.value)}}}),e._v(" "),a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){e.changePointUse("up")}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])])])])])]):e._e(),e._v(" "),"cvs"==e.shippingMethod?a("tr",[a("td",{attrs:{colspan:"2"}},[a("div",{staticClass:"form-group"},[a("strong",[e._v("配送門市選擇 *")]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"cvs-btn mg-icon mg-icon-cvs-7-11",on:{click:function(t){e.chooseCvs("UNIMARTC2C")}}}),e._v(" "),a("span",{staticClass:"cvs-btn mg-icon mg-icon-cvs-familymart",on:{click:function(t){e.chooseCvs("FAMIC2C")}}}),e._v(" "),a("span",{staticClass:"cvs-btn mg-icon mg-icon-cvs-hilife",on:{click:function(t){e.chooseCvs("HILIFEC2C")}}}),e._v(" "),a("span",{staticClass:"form-control"},[e._v(e._s(e.cvsParametor.CVSStoreName))])])])]):e._e()],2),e._v(" "),a("tfoot",[a("tr",[e._m(1),e._v(" "),a("td",{staticStyle:{"text-align":"right","min-width":"50px"}},[e._v("NT$ "+e._s(e.finalAmount-e.pointUsage+parseInt(e.shippingCosts)))])]),e._v(" "),"guest"==e.owner?a("tr",[e._m(2)]):a("tr",[e._m(3),e._v(" "),a("td",{staticStyle:{"text-align":"right","min-width":"50px"}},[e._v("\n                                "+e._s(Math.ceil((parseInt(e.finalAmount)-parseInt(e.pointUsage))*(parseInt(e.percentage)/100)))+" 元\n                            ")])]),e._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[e._v("有優惠券嗎? "),a("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.typeCoupon()}}},[e._v("點我輸入優惠碼")])])]),e._v(" "),e.isCouponFieldShow?a("tr",[a("td",{attrs:{colspan:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.couponNumber,expression:"couponNumber"}],staticClass:"form-control",staticStyle:{"margin-bottom":"10px"},attrs:{type:"text",id:"coupon-field",placeholder:"優惠券號碼"},domProps:{value:e.couponNumber},on:{input:function(t){t.target.composing||(e.couponNumber=t.target.value)}}}),e._v(" "),a("a",{staticClass:"btn btn-primary btn-block",on:{click:function(t){e.useCoupon()}}},[e._v("使用優惠券")])])]):e._e()])])]),e._v(" "),"cvs"==e.shippingMethod?a("div",{staticClass:"col-md-12"}):e._e(),e._v(" "),a("h4",[e._v("付款方式")]),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"payment-methods"},["cvs"==e.shippingMethod?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"payment-cod"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentMethod,expression:"paymentMethod"}],attrs:{type:"radio",id:"payment-cod",name:"payment-method-option",value:"cod"},domProps:{checked:e._q(e.paymentMethod,"cod")},on:{change:function(t){e.paymentMethod="cod"}}}),e._v(" "),a("strong",[e._v("貨到付款")]),e._v(" "),"cod"==e.paymentMethod?a("div",[a("p",[e._v("貨到付款，若運送方式為超商取貨的話，付款方式即為到店取貨付款。")])]):e._e()])]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"payment-ATM"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentMethod,expression:"paymentMethod"}],attrs:{type:"radio",id:"payment-ATM",name:"payment-method-option",value:"ATM"},domProps:{checked:e._q(e.paymentMethod,"ATM")},on:{change:function(t){e.paymentMethod="ATM"}}}),e._v(" "),a("strong",[e._v("ATM轉帳付款")]),e._v(" "),"ATM"==e.paymentMethod?a("div",[a("p",[e._v("提供線上或者實體ATM轉帳付款的服務，確認付款完成後將會進行後續出貨的動作。")])]):e._e()])]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"payment-Credit"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentMethod,expression:"paymentMethod"}],attrs:{type:"radio",id:"payment-Credit",name:"payment-method-option",value:"Credit"},domProps:{checked:e._q(e.paymentMethod,"Credit")},on:{change:function(t){e.paymentMethod="Credit"}}}),e._v(" "),a("strong",[e._v("信用卡付款")]),e._v(" "),"Credit"==e.paymentMethod?a("div",[a("p",[e._v("提供線上刷卡的服務，確認付款完成後將會進行後續出貨的動作。")])]):e._e()])])]),e._v(" "),"cod"==e.paymentMethod&&"cvs"==e.shippingMethod?a("button",{staticClass:"btn btn-success btn-lg btn-block",attrs:{type:"submit",name:"button"}},[e._v("超商取貨付款")]):e._e(),e._v(" "),"cvs"==e.shippingMethod&&"cod"!==e.paymentMethod?a("button",{staticClass:"btn btn-success btn-lg btn-block",attrs:{type:"submit",name:"button"}},[e._v("超商取貨")]):e._e(),e._v(" "),"cvs"!==e.shippingMethod?a("button",{staticClass:"btn btn-success btn-lg btn-block",attrs:{type:"submit",name:"button"}},[e._v("確認購買")]):e._e()])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("商品")]),this._v(" "),t("th",{staticStyle:{"text-align":"right","min-width":"50px"}},[this._v("價格")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("strong",[this._v("總計")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",{attrs:{colspan:"2"}},[t("br"),this._v(" "),t("strong",[t("a",{attrs:{href:"/register"}},[this._v("加入會員即可獲得購物金50元，並享有購物金額10%紅利累積回饋")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("strong",[this._v("可累計購物金")])])}]}}});